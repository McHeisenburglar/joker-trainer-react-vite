$card-table-distance: 100px;

$transform-all: translate(-50%, -50%);

$card-timing-function: cubic-bezier(0.16, 1.23, 0.2, 0.98);
$transition: all 700ms $card-timing-function;

@mixin card-transform($position) {
	$entrance-distance: 150%;
	$rotation-degrees: 0deg;

	$transform-scale: scale(0.8);
	// $transform-direction: translate(100px);
	// $transform-origin: translate($entrance-distance);

	$transform-direction: translateY(-$card-table-distance);
	$transform-origin: translateY(-$entrance-distance);

	@if $position == top {
		$transform-direction: translateY(-$card-table-distance);
		// $transform-origin: translateY(-$entrance-distance);
		$rotation-degrees: 180deg;
	} @else if $position == right {
		$transform-direction: translateX($card-table-distance);
		// $transform-origin: translateX($entrance-distance);
		$rotation-degrees: -90deg;
	} @else if $position == bottom {
		$transform-direction: translateY($card-table-distance);
		// $transform-origin: translateY($entrance-distance);
		$rotation-degrees: 0deg;
	} @else if $position == left {
		$transform-direction: translateX(-$card-table-distance);
		// $transform-origin: translateY(-$entrance-distance);
		$rotation-degrees: 90deg;
	} @else {
		@error "Unknown direction #{$direction}.";
	}

	$transform-rotate: rotate($rotation-degrees);

	.#{$position} {
		.animated-card.enter {
			opacity: 0;
			perspective: 200px;
			// transform: $transform-all $transform-direction $transform-rotate
			// 	$transform-origin $transform-scale rotateX(80deg) translateZ(400px);
			transform: $transform-all $transform-rotate translateY(400px);
		}
		.animated-card.enter-active {
			transition: $transition;

			opacity: 1;
			transform: $transform-all $transform-rotate translateY(100px);
			// transform: $transform-all $transform-direction $transform-rotate;
		}
		.animated-card.enter-done {
			opacity: 1;
		}
	}

	$exit-duration: 800ms;
	// $exit-timing-function: cubic-bezier(0.98, -0.2, 0.16, 1.11);

	// $exit-timing-function: cubic-bezier(0.74, -0.15, 0.29, 1.02);
	// $exit-timing-function: cubic-bezier(0.77, -0.2, 0.23, 1.09);
	// $exit-timing-function: cubic-bezier(0.95, -0.01, 0.34, 1);
	// $exit-timing-function: cubic-bezier(0.65, 0, 0.34, 1);
	// $exit-timing-function: cubic-bezier(0.77, -0.36, 1, 0.82);
	$exit-timing-function: cubic-bezier(0.82, -0.35, 0.54, 1.03);

	$exit-transition: all $exit-duration $exit-timing-function;

	.animated-card {
		&.goes-left {
			&.exit {
				z-index: -1;
				opacity: 1;
				position: absolute;
			}
			&.exit-active {
				opacity: 1;
				// transform: $transform-all $transform-direction $transform-rotate
				// 	$transform-origin $transform-scale rotateX(80deg) translateZ(400px);
				// transform: translate(-400%, -50%) translateX(100px) rotate(($rotation-degrees + 90deg));

				// transition: all 400ms;
				transition: $exit-transition;
				position: absolute;
			}
			&.exit-done {
				opacity: 0;
			}
		}
	}
	.#{$position} {
		.animated-card.goes-left.exit {
			transform: translate(-50%, -50%) rotate($rotation-degrees)
				translateY(100px);
		}
		@if $position == left {
			.animated-card.goes-left.exit-active {
				transform: translate(-50%, -50%) translateX(-400px) rotate(90deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
		} @else if $position == top {
			.animated-card.goes-left.exit-active {
				transform: translate(-50%, -50%) translateX(-400px) rotate(-90deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
		} @else if $position == right {
			.animated-card.goes-left.exit-active {
				transform: translate(-50%, -50%) translateX(-400px) rotate(-90deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
		} @else if $position == bottom {
			.animated-card.goes-left.exit-active {
				transform: translate(-50%, -50%) translateX(-400px) rotate(-90deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
			// .animated-card.goes-left.exit-active {
			// 	opacity: 0;
			// }
		}
		.animated-card.goes-left.exit-active {
			transition: transform $exit-duration $exit-timing-function,
				opacity 200ms cubic-bezier(0.78, 0.02, 0.78, 0.93) 300ms;
			opacity: 0;
		}

		// goes top
		$exit-distance: 200px;
		.animated-card.goes-top.exit {
			transform: translate(-50%, -50%) rotate($rotation-degrees)
				translateY(100px);
		}
		@if $position == left {
			.animated-card.goes-top.exit-active {
				transform: translate(-50%, -50%)
					translateY(-$exit-distance)
					rotate(0deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
		} @else if $position == top {
			.animated-card.goes-top.exit-active {
				transform: translate(-50%, -50%)
					translateY(-$exit-distance)
					rotate(180deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
		} @else if $position == right {
			.animated-card.goes-top.exit-active {
				transform: translate(-50%, -50%)
					translateY(-$exit-distance)
					rotate(0deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
		} @else if $position == bottom {
			.animated-card.goes-top.exit-active {
				transform: translate(-50%, -50%)
					translateY(-$exit-distance)
					rotate(0deg);
				// transform: translate(-50%, -50%) rotate(90deg) translateY(400px);
			}
			// .animated-card.goes-top.exit-active {
			// 	opacity: 0;
			// }
		}
		.animated-card.goes-top.exit-active {
			transition: transform $exit-duration $exit-timing-function,
				opacity 400ms cubic-bezier(0.78, 0.02, 0.78, 0.93) 500ms;
			opacity: 0;
		}
	}
}

@include card-transform(top);
@include card-transform(right);
@include card-transform(bottom);
@include card-transform(left);
// @include card-transform(bottom);

// Enter animation
// .top {
// 	.animated-card.enter {
// 		// .card {
// 		perspective: 200px;
// 		transform: translate(-50%, -50%) translateY(-100px) translateY(-150%)
// 			scale(1.3);
// 		// }
// 	}
// 	.animated-card.enter-active {
// 		// .card {
// 		opacity: 1;
// 		transform: translate(-50%, -50%) translateY(-100px) translateY(0);
// 		transition: $transition;
// 		transition-timing-function: $card-timing-function;

// 		// }
// 	}

// 	.animated-card.enter-done {
// 		opacity: 1;
// 	}
// }

// Exit animation
.animated-card.fade.exit {
	z-index: -1;
	opacity: 1;
	position: absolute;
}
.animated-card.fade.exit-active {
	opacity: 0;
	transition: all 200ms;
	position: absolute;
}

.animated-card.fade.exit-done {
	opacity: 0;
}

// .animated-card {
// }

.animated-card.card-slot.exit {
	z-index: -100;
	opacity: 0;
	position: absolute;
}
.animated-card.card-slot.exit-active {
	opacity: 0;
	transition: all 200ms;
	position: absolute;
}

.animated-card.card-slot.exit-done {
	opacity: 0;
}
